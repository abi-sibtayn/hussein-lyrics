<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hussein Lyrics</title>

  <style>
    body {
      background-color: #f4f1ec;
      color: #000000;
      font-family: Georgia, "Times New Roman", serif;
      margin: 0;
      padding: 0;
    }

    .container {
      width: 80%;
      margin: auto;
      padding: 40px;
    }

    h1 {
      text-align: center;
      font-size: 48px;
      letter-spacing: 2px;
    }

    h2 {
      border-bottom: 1px solid;
      padding-bottom: 5px;
    }

    .entry {
      margin-bottom: 40px;
    }

    .type {
      font-style: italic;
      opacity: 0.8;
    }

    pre {
      white-space: pre-wrap;
      font-family: inherit;
      font-size: 16px;
      line-height: 1.6;
    }

    .settings-btn {
      position: fixed;
      top: 15px;
      right: 15px;
      border: 1px solid;
      background: none;
      padding: 6px 10px;
      cursor: pointer;
      font-family: inherit;
      color: inherit;
    }

    .settings-panel {
      position: fixed;
      top: 60px;
      right: 15px;
      border: 1px solid;
      padding: 15px;
      display: none;
      background-color: inherit;
      color: inherit;
    }

    .settings-panel button {
      display: block;
      width: 100%;
      margin: 6px 0;
      font-family: inherit;
      cursor: pointer;
    }

    .footer {
      margin-top: 60px;
      font-size: 14px;
      text-align: center;
      opacity: 0.7;
    }
  </style>

  <script>
    /* ============================
       LIST YOUR .template FILES HERE
       Add ONE new line per template
       ============================ */
    const templateFiles = [
      "amma-fizza.template",
      "example.template"
      // add more here
    ];

    function toggleSettings() {
      const panel = document.getElementById("settings");
      panel.style.display = panel.style.display === "block" ? "none" : "block";
    }

    function darkMode() {
      document.body.style.backgroundColor = "#0e0e0e";
      document.body.style.color = "#ffffff";
    }

    function lightMode() {
      document.body.style.backgroundColor = "#f4f1ec";
      document.body.style.color = "#000000";
    }

    async function loadTemplates() {
      const container = document.getElementById("entries");

      for (const file of templateFiles) {
        try {
          const res = await fetch(file);
          const text = await res.text();
          const entry = parseTemplate(text);
          container.appendChild(renderEntry(entry));
        } catch (err) {
          console.error("Failed to load:", file);
        }
      }
    }

    function parseTemplate(text) {
      const lines = text.split("\n");
      const data = { lyrics: "" };
      let inLyrics = false;

      for (const line of lines) {
        if (line.startsWith("vid-url:")) data.vid = line.replace("vid-url:", "").trim();
        else if (line.startsWith("name:")) data.name = line.replace("name:", "").trim();
        else if (line.startsWith("type:")) data.type = line.replace("type:", "").trim();
        else if (line.startsWith("lyrics:")) inLyrics = true;
        else if (inLyrics) data.lyrics += line + "\n";
      }

      return data;
    }

    function renderEntry(data) {
      const div = document.createElement("div");
      div.className = "entry";

      div.innerHTML = `
        <h2>${data.name}</h2>
        <div class="type">${data.type}</div>
        ${data.vid ? `<p><a href="${data.vid}" target="_blank">Watch Recitation</a></p>` : ""}
        <pre>${data.lyrics.trim()}</pre>
      `;

      return div;
    }

    window.onload = loadTemplates;
  </script>
</head>

<body>

  <button class="settings-btn" onclick="toggleSettings()">‚öô Settings</button>

  <div id="settings" class="settings-panel">
    <button onclick="darkMode()">üñ§ Dark Mode</button>
    <button onclick="lightMode()">ü§ç Light Mode</button>
    <button onclick="toggleSettings()">Close</button>
  </div>

  <div class="container">
    <h1>HUSSEIN LYRICS</h1>

    <p align="center">
      <i>
        A quiet archive of nauha, latmiya, qasidah, manqabat, and merciya lyrics<br>
        written in remembrance of Aba  øAbdillah al-Husayn (ÿπ)
      </i>
    </p>

    <hr>

    <div id="entries">
      <!-- lyrics auto-load here -->
    </div>

    <div class="footer">
      Ya Husayn (ÿπ)<br>
      Made by the <b>Abi Sibtayn Community</b>
    </div>
  </div>

</body>
</html>
